{{define "game-board"}}
<section id="game-board" class="mx-auto" style="max-width: 350px;" aria-label="Wordle game board">
    {{range $row, $guesses := .game.Guesses}}
        <div class="guess-row d-flex justify-content-center mb-1" role="row">
            {{range $col, $guess := $guesses}}
                <div class="tile border border-2 rounded d-flex align-items-center justify-content-center fw-bold text-uppercase mx-1
                           {{if $guess.Letter}}filled tile-{{$guess.Status}}{{end}}
                           {{if and (eq $row $.game.CurrentRow) (not $.game.GameOver) (not $guess.Letter)}}tile-active{{end}}"
                     role="gridcell" aria-label="{{if $guess.Letter}}{{$guess.Letter}}{{else}}Empty{{end}}">
                    {{$guess.Letter}}
                </div>
            {{end}}
        </div>
    {{end}}
</section>
{{if .error}}
    <div class="alert alert-danger alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3" 
         role="alert" style="z-index: 1050; min-width: 280px;">
        {{.error}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{{end}}
{{if .game.GameOver}}
    <section class="mt-3 p-3 bg-body-secondary rounded shadow-sm" style="max-width: 350px;" aria-label="Game over summary">
        {{if .game.Won}}
            <h2 class="text-success text-center h5 mb-2">ðŸŽ‰ Congratulations! ðŸŽ‰</h2>
            <p class="text-center mb-3 small">You guessed the word in {{len .game.GuessHistory}} {{if eq (len .game.GuessHistory) 1}}try{{else}}tries{{end}}!</p>
        {{else}}
            <h2 class="text-danger text-center h5 mb-2">Game Over!</h2>
            <p class="text-center mb-3 small">The word was: <strong>{{.game.TargetWord}}</strong></p>
        {{end}}
        <div class="text-center">
            <button class="btn btn-primary btn-sm" onclick="shareResults()" type="button" aria-label="Share results">
                <i class="bi bi-share"></i> Share Results
            </button>
        </div>
    </section>
{{end}}
{{end}}
